<!DOCTYPE html>
<html lang="vi">
<head><script src="/livereload.js?mindelay=10&amp;v=2&amp;port=1313&amp;path=livereload" data-no-instant defer></script>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>6. Kỹ thuật Tối ưu hóa Truy vấn - RDS Performance Insights &amp; Tối Ưu Hóa Truy Vấn</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
    <style>
        * { margin: 0; padding: 0; box-sizing: border-box; }
        body { font-family: "Work Sans", "Helvetica", "Tahoma", "Geneva", "Arial", sans-serif; font-weight: 300; line-height: 1.6; font-size: 18px; }
        
        #sidebar { position: fixed; top: 0; left: 0; width: 300px; height: 100vh; background: #282828; color: #ccc; overflow-y: auto; z-index: 1000; }
        #sidebar .searchbox { padding: 10px; background: #323232; }
        #sidebar .searchbox input { width: 100%; padding: 10px; border: none; background: #404040; color: #ccc; border-radius: 4px; }
        
        #sidebar-toggle-span { display: none; }
        
        #body { margin-left: 300px; }
        #body .padding { padding: 3rem 6rem; }
        
         
        #sidebar ul { list-style: none; padding: 0; margin: 0; }
        #sidebar ul li a { display: block; padding: 10px 20px; color: #ccc; text-decoration: none; border-left: 4px solid transparent; }
        #sidebar ul li a:hover { background: #404040; border-left-color: #599a3e; }
        #sidebar ul li.active > a { background: #404040; border-left-color: #599a3e; color: #ccc; }
        #sidebar ul ul { padding-left: 20px; }
        #sidebar ul ul li a { padding: 8px 20px; font-size: 0.9em; }
        
         
        #sidebar #header { padding: 2rem 1rem; text-align: center; }
        #sidebar #header .baseurl { color: #599a3e; font-size: 1.5rem; font-weight: bold; }
        
         
        .language-switcher { position: relative; padding: 20px; }
        .language-switcher a { color: #599a3e; text-decoration: none; margin-left: 10px; }
        
         
        h1, h2, h3, h4, h5, h6 { color: #5e5e5e; font-weight: 400; }
        h1 { font-size: 3rem; }
        
         
        .chapter h1 { color: #599a3e; border-bottom: 4px solid #F0F2F4; padding-bottom: 1rem; margin-bottom: 2rem; }
        
         
        .page-list { margin-top: 2rem; }
        .page-item { margin: 1rem 0; padding: 1rem; border: 1px solid #e0e0e0; border-radius: 4px; }
        .page-item h2 { margin: 0 0 0.5rem 0; }
        .page-item h2 a { color: #599a3e; text-decoration: none; }
        .page-item h2 a:hover { text-decoration: underline; }
        .page-item p { color: #666; margin: 0; }
        
         
        .breadcrumbs { margin-bottom: 2rem; color: #999; }
        .breadcrumbs a { color: #599a3e; text-decoration: none; }
        .breadcrumbs a:hover { text-decoration: underline; }
        
         
        @media (max-width: 768px) {
            #sidebar { transform: translateX(-300px); transition: transform 0.3s; }
            #sidebar.open { transform: translateX(0); }
            #body { margin-left: 0; }
            #body .padding { padding: 1rem 2rem; }
            #sidebar-toggle-span { display: block; position: fixed; top: 10px; left: 10px; z-index: 1001; }
            #sidebar-toggle { background: #599a3e; color: white; padding: 10px; border: none; border-radius: 4px; }
        }
    </style>
</head>
<body>
    <nav id="sidebar">
        <div id="header">
            <a id="logo" href='/'>
  <div style="text-align: center; padding: 20px;">
    <h2 style="color: var(--MENU-SEARCH-BOX-color, #33a1ff); font-size: 2rem; font-weight: bold; margin: 0;">
      LEARN
    </h2>
    <p style="color: var(--MENU-SEARCH-BOX-ICONS-color, #a1d2fd); font-size: 0.9rem; margin: 5px 0 0 0;">
      RDS Performance Insights
    </p>
  </div>
</a>

        </div>
        
        <div class="searchbox">
            <input type="search" placeholder="Search..." id="search-input">
        </div>
        
        <ul class="topics">
            <li><a href="http://localhost:1313/"><i class="fas fa-home"></i> Home</a></li>
            
            <li class="">
                <a href="/vi/introduction/"><i class="fas fa-book"></i> 1. Giới Thiệu</a>
                
            </li>
            
            <li class="">
                <a href="/vi/preparation/"><i class="fas fa-book"></i> 2. Chuẩn Bị</a>
                
            </li>
            
            <li class="">
                <a href="/vi/performance-baseline/"><i class="fas fa-book"></i> 3. Thiết lập Đường cơ sở Hiệu suất</a>
                
            </li>
            
            <li class="">
                <a href="/vi/performance-insights/"><i class="fas fa-book"></i> Performance Insights</a>
                
            </li>
            
            <li class="">
                <a href="/vi/monitoring-dashboard/"><i class="fas fa-book"></i> 4. Bảng điều khiển Giám sát</a>
                
            </li>
            
            <li class="">
                <a href="/vi/alerting-system/"><i class="fas fa-book"></i> 5. Hệ thống Cảnh báo</a>
                
            </li>
            
            <li class="active">
                <a href="/vi/query-optimization/"><i class="fas fa-book"></i> 6. Kỹ thuật Tối ưu hóa Truy vấn</a>
                
                <ul>
                    
                    <li><a href="/vi/query-optimization/overview/">Tổng quan</a></li>
                    
                </ul>
                
            </li>
            
            <li class="">
                <a href="/vi/automated-tuning/"><i class="fas fa-book"></i> 7. Đề xuất Điều chỉnh Tự động</a>
                
            </li>
            
            <li class="">
                <a href="/vi/capacity-planning/"><i class="fas fa-book"></i> 8. Lập kế hoạch Năng lực</a>
                
            </li>
            
            <li class="">
                <a href="/vi/monitoring/"><i class="fas fa-book"></i> 9. Giám sát &amp; Cảnh báo</a>
                
            </li>
            
            <li class="">
                <a href="/vi/best-practices/"><i class="fas fa-book"></i> 10. Dọn dẹp tài nguyên</a>
                
            </li>
            
        </ul>
        
        <div class="language-switcher">
            
            
            <a href="/vi/en"><i class="fas fa-language"></i> English</a>
            
            
            
            
        </div>
    </nav>

    <span id="sidebar-toggle-span">
        <a href="#" id="sidebar-toggle"><i class="fas fa-bars"></i></a>
    </span>

    <section id="body">
        <div id="overlay"></div>
        <div class="padding">
            <div id="body-inner">
                <div class="breadcrumbs">
                    <a href="http://localhost:1313/">Home</a>
                    
                    <span> > </span><a href="/vi/">RDS Performance Insights &amp; Query Optimization</a>
                    
                    <span> > </span>6. Kỹ thuật Tối ưu hóa Truy vấn
                </div>
                
                <div class="chapter">
                    <h1>6. Kỹ thuật Tối ưu hóa Truy vấn</h1>
                    <h3 id="chương-6">Chương 6</h3>
<h1 id="kỹ-thuật-tối-ưu-hóa-truy-vấn">Kỹ thuật Tối ưu hóa Truy vấn</h1>
<p>Các phương pháp để cải thiện hiệu suất của các truy vấn SQL.</p>
<h2 id="mục-tiêu">Mục tiêu</h2>
<p>Giảm thời gian thực thi truy vấn, giảm tài nguyên tiêu thụ.</p>
<h2 id="các-nguồn-phát-hiện-vấn-đề">Các nguồn phát hiện vấn đề</h2>
<h3 id="rds-performance-insights">RDS Performance Insights</h3>
<p>Xác định các truy vấn SQL tiêu tốn nhiều tài nguyên nhất (Top SQL).</p>
<h3 id="slow-query-logs">Slow Query Logs</h3>
<p>Các truy vấn vượt quá ngưỡng thời gian được ghi lại.</p>
<h3 id="database-activity-streams-das">Database Activity Streams (DAS)</h3>
<p>(Với Aurora và RDS cho PostgreSQL) Cung cấp luồng hoạt động DB chi tiết để phân tích sâu hơn.</p>
<h2 id="các-kỹ-thuật-tối-ưu-hóa">Các kỹ thuật tối ưu hóa</h2>
<h3 id="1-tối-ưu-hóa-index">1. Tối ưu hóa Index</h3>
<h4 id="tạo-index-phù-hợp">Tạo Index phù hợp</h4>
<ul>
<li>Các cột trong mệnh đề WHERE</li>
<li>Các cột trong JOIN</li>
<li>Các cột trong ORDER BY, GROUP BY</li>
</ul>
<h4 id="quản-lý-index">Quản lý Index</h4>
<ul>
<li>Xóa các index không sử dụng</li>
<li>Sử dụng Covering Index để tối thiểu hóa việc truy cập bảng</li>
</ul>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-sql" data-lang="sql"><span style="display:flex;"><span><span style="color:#75715e">-- Ví dụ tạo covering index
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span><span style="color:#66d9ef">CREATE</span> <span style="color:#66d9ef">INDEX</span> idx_order_covering 
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">ON</span> orders (customer_id, order_date) 
</span></span><span style="display:flex;"><span>INCLUDE (total_amount, status);
</span></span></code></pre></div><h3 id="2-viết-lại-truy-vấn-query-rewriting">2. Viết lại Truy vấn (Query Rewriting)</h3>
<h4 id="best-practices">Best Practices</h4>
<ul>
<li>Tránh <code>SELECT *</code></li>
<li>Tối ưu hóa mệnh đề JOIN (chọn đúng loại JOIN, thứ tự JOIN)</li>
<li>Tránh các hàm trên cột có index trong mệnh đề WHERE</li>
<li>Sử dụng <code>UNION ALL</code> thay vì <code>UNION</code> nếu không cần loại bỏ trùng lặp</li>
<li>Tối ưu hóa GROUP BY và ORDER BY</li>
</ul>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-sql" data-lang="sql"><span style="display:flex;"><span><span style="color:#75715e">-- Thay vì
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span><span style="color:#66d9ef">SELECT</span> <span style="color:#f92672">*</span> <span style="color:#66d9ef">FROM</span> orders <span style="color:#66d9ef">WHERE</span> <span style="color:#66d9ef">YEAR</span>(order_date) <span style="color:#f92672">=</span> <span style="color:#ae81ff">2023</span>;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">-- Sử dụng
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span><span style="color:#66d9ef">SELECT</span> order_id, customer_id, total_amount 
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">FROM</span> orders 
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">WHERE</span> order_date <span style="color:#f92672">&gt;=</span> <span style="color:#e6db74">&#39;2023-01-01&#39;</span> 
</span></span><span style="display:flex;"><span>  <span style="color:#66d9ef">AND</span> order_date <span style="color:#f92672">&lt;</span> <span style="color:#e6db74">&#39;2024-01-01&#39;</span>;
</span></span></code></pre></div><h3 id="3-tối-ưu-hóa-schema">3. Tối ưu hóa Schema</h3>
<h4 id="lựa-chọn-kiểu-dữ-liệu">Lựa chọn kiểu dữ liệu</h4>
<ul>
<li>Chọn kiểu dữ liệu phù hợp (ví dụ: dùng INT thay vì BIGINT nếu đủ)</li>
<li>Chuẩn hóa/Phi chuẩn hóa phù hợp với workload</li>
</ul>
<h4 id="phân-vùng-bảng-table-partitioning">Phân vùng bảng (Table Partitioning)</h4>
<p>Cho các bảng lớn để cải thiện hiệu suất truy vấn.</p>
<h3 id="4-sử-dụng-caching">4. Sử dụng Caching</h3>
<h4 id="application-level-caching">Application-level Caching</h4>
<p>Cache kết quả truy vấn ở tầng ứng dụng:</p>
<ul>
<li>Redis</li>
<li>Memcached</li>
</ul>
<h4 id="database-level-caching">Database-level Caching</h4>
<p>Tự động bởi RDS, nhưng cần tối ưu hóa truy vấn để tận dụng.</p>

                </div>
                
                
                <div class="page-list">
                    
                    <div class="page-item">
                        <h2><a href="/vi/query-optimization/overview/">Tổng quan</a></h2>
                        
                        <p>Tổng quan tối ưu hóa truy vấn 🎯 Tối ưu hóa truy vấn là gì? Tối ưu hóa truy vấn là quá trình cải thiện hiệu suất truy vấn cơ sở dữ liệu thông qua các kỹ thuật khác nhau bao gồm tối ưu hóa chỉ mục, viết lại truy vấn và phân tích kế hoạch thực thi.
Thông tin: Tối ưu hóa truy vấn hiệu quả có thể cải thiện hiệu suất 70% hoặc hơn trong khi giảm tiêu thụ tài nguyên.</p>
                        
                    </div>
                    
                </div>
                
            </div>
        </div>
    </section>

    <script>
        
        document.getElementById('sidebar-toggle').addEventListener('click', function(e) {
            e.preventDefault();
            document.getElementById('sidebar').classList.toggle('open');
        });
    </script>
</body>
</html>
