<!doctype html><html lang=vi><head><meta charset=UTF-8><meta name=viewport content="width=device-width,initial-scale=1"><title>T·ªïng quan - RDS Performance Insights & T·ªëi ∆Øu H√≥a Truy V·∫•n</title>
<link rel=stylesheet href=https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css><link rel=stylesheet href=/css/theme-blue.css><style>*{margin:0;padding:0;box-sizing:border-box}body{font-family:work sans,helvetica,tahoma,geneva,arial,sans-serif;font-weight:300;line-height:1.6;font-size:18px;color:var(--MAIN-TEXT-color,#323232)}#sidebar{position:fixed;top:0;left:0;width:300px;height:100vh;background:var(--MENU-SECTIONS-BG-color,#252c31);color:#ccc;overflow-y:auto;z-index:1000}#sidebar #header{padding:2rem 1rem;text-align:center;background:var(--MENU-HEADER-BG-color,#1C90F3);border-bottom:1px solid var(--MENU-HEADER-BORDER-color,#33a1ff)}#sidebar #header .baseurl{color:var(--MENU-SEARCH-BOX-color,#33a1ff);font-size:1.5rem;font-weight:700}#sidebar .searchbox{padding:10px;background:var(--MENU-SEARCH-BG-color,#167ad0);border-bottom:1px solid var(--MENU-SEARCH-BOX-color,#33a1ff)}#sidebar .searchbox input{width:100%;padding:10px;border:1px solid var(--MENU-SEARCH-BOX-color,#33a1ff);background:rgba(255,255,255,.1);color:var(--MENU-SEARCH-BOX-ICONS-color,#a1d2fd);border-radius:4px}#sidebar-toggle-span{display:none}#body{margin-left:300px}#body .padding{padding:3rem 6rem}#sidebar ul{list-style:none;padding:0;margin:0}#sidebar ul li a{display:block;padding:10px 20px;color:var(--MENU-SECTIONS-LINK-color,#ccc);text-decoration:none;border-left:4px solid transparent}#sidebar ul li a:hover{background:var(--MENU-SECTIONS-ACTIVE-BG-color,#20272b);border-left-color:var(--MAIN-LINK-color,#1C90F3);color:var(--MENU-SECTIONS-LINK-HOVER-color,#e6e6e6)}#sidebar ul li.active>a{background:var(--MENU-SECTION-ACTIVE-CATEGORY-BG-color,#fff);border-left-color:var(--MAIN-LINK-color,#1C90F3);color:var(--MENU-SECTION-ACTIVE-CATEGORY-color,#777)}#sidebar ul ul{padding-left:20px}#sidebar ul ul li a{padding:8px 20px;font-size:.9em}.language-switcher{position:relative;padding:20px}.language-switcher a{color:var(--MAIN-LINK-color,#1C90F3);text-decoration:none;margin-left:10px}.language-switcher a:hover{color:var(--MAIN-LINK-HOVER-color,#167ad0)}h1,h2,h3,h4,h5,h6{color:var(--MAIN-TITLES-TEXT-color,#5e5e5e);font-weight:400}h1{font-size:3rem}h2{font-size:2.5rem}h3{font-size:2rem}a{color:var(--MAIN-LINK-color,#1C90F3)}a:hover{color:var(--MAIN-LINK-HOVER-color,#167ad0)}pre{background:#f8f8f8;padding:1rem;border-radius:4px;overflow-x:auto}code{background:#f8f8f8;padding:.2rem .4rem;border-radius:3px;font-size:.9em}.breadcrumbs{margin-bottom:2rem;color:#999}.breadcrumbs a{color:var(--MAIN-LINK-color,#1C90F3);text-decoration:none}.breadcrumbs a:hover{color:var(--MAIN-LINK-HOVER-color,#167ad0);text-decoration:underline}@media(max-width:768px){#sidebar{transform:translateX(-300px);transition:transform .3s}#sidebar.open{transform:translateX(0)}#body{margin-left:0}#body .padding{padding:1rem 2rem}#sidebar-toggle-span{display:block;position:fixed;top:10px;left:10px;z-index:1001}#sidebar-toggle{background:var(--MAIN-LINK-color,#1C90F3);color:#fff;padding:10px;border:none;border-radius:4px}}</style></head><body><nav id=sidebar><div id=header><a id=logo href=/><div style=text-align:center;padding:20px><h2 style=color:var(--MENU-SEARCH-BOX-color,#33a1ff);font-size:2rem;font-weight:700;margin:0>LEARN</h2><p style="color:var(--MENU-SEARCH-BOX-ICONS-color,#a1d2fd);font-size:.9rem;margin:5px 0 0">RDS Performance Insights</p></div></a></div><div class=searchbox><input type=search placeholder=Search... id=search-input></div><ul class=topics><li><a href=http://localhost:1313/><i class="fas fa-home"></i> Home</a></li><li><a href=/vi/introduction/><i class="fas fa-book"></i> 1. Gi·ªõi Thi·ªáu</a></li><li><a href=/vi/preparation/><i class="fas fa-book"></i> 2. Chu·∫©n B·ªã</a></li><li><a href=/vi/performance-baseline/><i class="fas fa-book"></i> 3. Thi·∫øt l·∫≠p ƒê∆∞·ªùng c∆° s·ªü Hi·ªáu su·∫•t</a></li><li><a href=/vi/performance-insights/><i class="fas fa-book"></i> Performance Insights</a></li><li><a href=/vi/monitoring-dashboard/><i class="fas fa-book"></i> 4. B·∫£ng ƒëi·ªÅu khi·ªÉn Gi√°m s√°t</a></li><li><a href=/vi/alerting-system/><i class="fas fa-book"></i> 5. H·ªá th·ªëng C·∫£nh b√°o</a></li><li class=active><a href=/vi/query-optimization/><i class="fas fa-book"></i> 6. K·ªπ thu·∫≠t T·ªëi ∆∞u h√≥a Truy v·∫•n</a><ul><li class=active><a href=/vi/query-optimization/overview/>T·ªïng quan</a></li><li><a href=/vi/query-optimization/index-strategies/>Chi·∫øn l∆∞·ª£c Index</a></li><li><a href=/vi/query-optimization/query-rewriting/>Vi·∫øt l·∫°i Truy v·∫•n</a></li><li><a href=/vi/query-optimization/execution-plans/>K·∫ø ho·∫°ch Th·ª±c thi</a></li></ul></li><li><a href=/vi/automated-tuning/><i class="fas fa-book"></i> 7. ƒê·ªÅ xu·∫•t ƒêi·ªÅu ch·ªânh T·ª± ƒë·ªông</a></li><li><a href=/vi/capacity-planning/><i class="fas fa-book"></i> 8. L·∫≠p k·∫ø ho·∫°ch NƒÉng l·ª±c</a></li><li><a href=/vi/monitoring/><i class="fas fa-book"></i> 9. Gi√°m s√°t & C·∫£nh b√°o</a></li><li><a href=/vi/best-practices/><i class="fas fa-book"></i> 10. D·ªçn d·∫πp t√†i nguy√™n</a></li></ul><div class=language-switcher><a href=/vi/en><i class="fas fa-language"></i> English</a></div></nav><span id=sidebar-toggle-span><a href=# id=sidebar-toggle><i class="fas fa-bars"></i></a></span><section id=body><div id=overlay></div><div class=padding><div id=body-inner><div class=breadcrumbs><a href=http://localhost:1313/>Home</a>
<span>> </span><a href=/vi/>RDS Performance Insights & T·ªëi ∆Øu H√≥a Truy V·∫•n</a>
<span>> </span><a href=/vi/query-optimization/>6. K·ªπ thu·∫≠t T·ªëi ∆∞u h√≥a Truy v·∫•n</a>
<span>> </span>T·ªïng quan</div><h1>T·ªïng quan</h1><h1 id=t·ªïng-quan-t·ªëi-∆∞u-h√≥a-truy-v·∫•n>T·ªïng quan t·ªëi ∆∞u h√≥a truy v·∫•n</h1><h2 id=-t·ªëi-∆∞u-h√≥a-truy-v·∫•n-l√†-g√¨>üéØ T·ªëi ∆∞u h√≥a truy v·∫•n l√† g√¨?</h2><p>T·ªëi ∆∞u h√≥a truy v·∫•n l√† qu√° tr√¨nh c·∫£i thi·ªán hi·ªáu su·∫•t truy v·∫•n c∆° s·ªü d·ªØ li·ªáu th√¥ng qua c√°c k·ªπ thu·∫≠t kh√°c nhau bao g·ªìm t·ªëi ∆∞u h√≥a ch·ªâ m·ª•c, vi·∫øt l·∫°i truy v·∫•n v√† ph√¢n t√≠ch k·∫ø ho·∫°ch th·ª±c thi.</p><blockquote><p><strong>Th√¥ng tin</strong>: T·ªëi ∆∞u h√≥a truy v·∫•n hi·ªáu qu·∫£ c√≥ th·ªÉ c·∫£i thi·ªán hi·ªáu su·∫•t 70% ho·∫∑c h∆°n trong khi gi·∫£m ti√™u th·ª• t√†i nguy√™n.</p></blockquote><hr><h2 id=-k·ªπ-thu·∫≠t-t·ªëi-∆∞u-h√≥a>üöÄ K·ªπ thu·∫≠t t·ªëi ∆∞u h√≥a</h2><h3 id=1-t·ªëi-∆∞u-h√≥a-ch·ªâ-m·ª•c>1. T·ªëi ∆∞u h√≥a ch·ªâ m·ª•c</h3><ul><li><strong>Composite Indexes</strong>: Ch·ªâ m·ª•c nhi·ªÅu c·ªôt cho c√°c truy v·∫•n ph·ª©c t·∫°p</li><li><strong>Partial Indexes</strong>: Ch·ªâ m·ª•c v·ªõi ƒëi·ªÅu ki·ªán WHERE</li><li><strong>Covering Indexes</strong>: Bao g·ªìm t·∫•t c·∫£ c√°c c·ªôt c·∫ßn thi·∫øt</li><li><strong>Index Maintenance</strong>: Gi√°m s√°t v√† d·ªçn d·∫πp th∆∞·ªùng xuy√™n</li></ul><h3 id=2-vi·∫øt-l·∫°i-truy-v·∫•n>2. Vi·∫øt l·∫°i truy v·∫•n</h3><ul><li><strong>Subquery Optimization</strong>: Chuy·ªÉn ƒë·ªïi th√†nh JOINs khi ph√π h·ª£p</li><li><strong>Window Functions</strong>: Thay th·∫ø nhi·ªÅu truy v·∫•n GROUP BY</li><li><strong>CTE Usage</strong>: Common Table Expressions cho logic ph·ª©c t·∫°p</li><li><strong>LIMIT Usage</strong>: Gi·∫£m k√≠ch th∆∞·ªõc t·∫≠p k·∫øt qu·∫£</li></ul><h3 id=3-ph√¢n-t√≠ch-k·∫ø-ho·∫°ch-th·ª±c-thi>3. Ph√¢n t√≠ch k·∫ø ho·∫°ch th·ª±c thi</h3><ul><li><strong>EXPLAIN Analysis</strong>: Hi·ªÉu vi·ªác th·ª±c thi truy v·∫•n</li><li><strong>Cost Analysis</strong>: X√°c ƒë·ªãnh c√°c ho·∫°t ƒë·ªông t·ªën k√©m</li><li><strong>Join Optimization</strong>: Ch·ªçn lo·∫°i join ph√π h·ª£p</li><li><strong>Sort Optimization</strong>: Gi·∫£m thi·ªÉu c√°c ho·∫°t ƒë·ªông s·∫Øp x·∫øp</li></ul><hr><h2 id=-t√°c-ƒë·ªông-hi·ªáu-su·∫•t>üìä T√°c ƒë·ªông hi·ªáu su·∫•t</h2><h3 id=tr∆∞·ªõc-v√†-sau-t·ªëi-∆∞u-h√≥a>Tr∆∞·ªõc v√† sau t·ªëi ∆∞u h√≥a</h3><table><thead><tr><th>Ch·ªâ s·ªë</th><th>Tr∆∞·ªõc</th><th>Sau</th><th>C·∫£i thi·ªán</th></tr></thead><tbody><tr><td><strong>Th·ªùi gian ph·∫£n h·ªìi truy v·∫•n</strong></td><td>3-5 gi√¢y</td><td>1-1.5 gi√¢y</td><td><strong>70%</strong></td></tr><tr><td><strong>S·ª≠ d·ª•ng t√†i nguy√™n</strong></td><td>CPU/IO cao</td><td>ƒê∆∞·ª£c t·ªëi ∆∞u</td><td><strong>60%</strong></td></tr><tr><td><strong>Th√¥ng l∆∞·ª£ng</strong></td><td>100 QPS</td><td>250 QPS</td><td><strong>150%</strong></td></tr><tr><td><strong>T·ª∑ l·ªá tr√∫ng ch·ªâ m·ª•c</strong></td><td>75%</td><td>95%</td><td><strong>27%</strong></td></tr></tbody></table><hr><h2 id=-chi·∫øn-l∆∞·ª£c-t·ªëi-∆∞u-h√≥a>üéØ Chi·∫øn l∆∞·ª£c t·ªëi ∆∞u h√≥a</h2><h3 id=giai-ƒëo·∫°n-1-x√°c-ƒë·ªãnh-n√∫t-th·∫Øt>Giai ƒëo·∫°n 1: X√°c ƒë·ªãnh n√∫t th·∫Øt</h3><ol><li><strong>Gi√°m s√°t c√°c truy v·∫•n ch·∫≠m</strong> s·ª≠ d·ª•ng Performance Insights</li><li><strong>Ph√¢n t√≠ch k·∫ø ho·∫°ch th·ª±c thi</strong> cho c√°c ho·∫°t ƒë·ªông t·ªën k√©m</li><li><strong>X√°c ƒë·ªãnh ch·ªâ m·ª•c b·ªã thi·∫øu</strong> th√¥ng qua c√°c m·∫´u truy v·∫•n</li><li><strong>Xem x√©t th·ªëng k√™ b·∫£ng</strong> v√† ph√¢n ph·ªëi d·ªØ li·ªáu</li></ol><h3 id=giai-ƒëo·∫°n-2-tri·ªÉn-khai-t·ªëi-∆∞u-h√≥a>Giai ƒëo·∫°n 2: Tri·ªÉn khai t·ªëi ∆∞u h√≥a</h3><ol><li><strong>T·∫°o ch·ªâ m·ª•c c√≥ m·ª•c ti√™u</strong> cho c√°c truy v·∫•n ch·∫≠m</li><li><strong>Vi·∫øt l·∫°i c√°c truy v·∫•n kh√¥ng hi·ªáu qu·∫£</strong> s·ª≠ d·ª•ng best practices</li><li><strong>T·ªëi ∆∞u h√≥a c√°c ho·∫°t ƒë·ªông JOIN</strong> v√† ƒëi·ªÅu ki·ªán</li><li><strong>Tri·ªÉn khai caching k·∫øt qu·∫£ truy v·∫•n</strong> khi ph√π h·ª£p</li></ol><h3 id=giai-ƒëo·∫°n-3-gi√°m-s√°t-v√†-x√°c-th·ª±c>Giai ƒëo·∫°n 3: Gi√°m s√°t v√† x√°c th·ª±c</h3><ol><li><strong>ƒêo l∆∞·ªùng c·∫£i thi·ªán hi·ªáu su·∫•t</strong> s·ª≠ d·ª•ng c√°c ch·ªâ s·ªë</li><li><strong>Gi√°m s√°t thay ƒë·ªïi s·ª≠ d·ª•ng t√†i nguy√™n</strong></li><li><strong>X√°c th·ª±c logic business</strong> v·∫´n ƒë√∫ng</li><li><strong>T√†i li·ªáu h√≥a c√°c thay ƒë·ªïi t·ªëi ∆∞u h√≥a</strong> ƒë·ªÉ tham kh·∫£o trong t∆∞∆°ng lai</li></ol><hr><h2 id=-chi·∫øn-th·∫Øng-nhanh>üí° Chi·∫øn th·∫Øng nhanh</h2><blockquote><p><strong>Chi·∫øn th·∫Øng nhanh #1</strong>: Th√™m ch·ªâ m·ª•c tr√™n c√°c c·ªôt ƒë∆∞·ª£c l·ªçc th∆∞·ªùng xuy√™n - c√≥ th·ªÉ cung c·∫•p c·∫£i thi·ªán hi·ªáu su·∫•t ngay l·∫≠p t·ª©c 50-80%.</p></blockquote><blockquote><p><strong>Chi·∫øn th·∫Øng nhanh #2</strong>: S·ª≠ d·ª•ng m·ªánh ƒë·ªÅ LIMIT ƒë·ªÉ gi·∫£m k√≠ch th∆∞·ªõc t·∫≠p k·∫øt qu·∫£ - ƒë·∫∑c bi·ªát hi·ªáu qu·∫£ cho c√°c truy v·∫•n ph√¢n trang.</p></blockquote><blockquote><p><strong>Chi·∫øn th·∫Øng nhanh #3</strong>: Thay th·∫ø SELECT * b·∫±ng t√™n c·ªôt c·ª• th·ªÉ - gi·∫£m I/O v√† network overhead.</p></blockquote><hr><h2 id=-c√¥ng-c·ª•-t·ªëi-∆∞u-h√≥a>üîß C√¥ng c·ª• t·ªëi ∆∞u h√≥a</h2><h3 id=postgresql>PostgreSQL</h3><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-sql data-lang=sql><span style=display:flex><span><span style=color:#75715e>-- Ph√¢n t√≠ch truy v·∫•n
</span></span></span><span style=display:flex><span><span style=color:#75715e></span><span style=color:#66d9ef>EXPLAIN</span> (<span style=color:#66d9ef>ANALYZE</span>, BUFFERS) <span style=color:#66d9ef>SELECT</span> <span style=color:#f92672>*</span> <span style=color:#66d9ef>FROM</span> orders <span style=color:#66d9ef>WHERE</span> customer_id <span style=color:#f92672>=</span> <span style=color:#ae81ff>123</span>;
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e>-- T√¨m c√°c truy v·∫•n ch·∫≠m
</span></span></span><span style=display:flex><span><span style=color:#75715e></span><span style=color:#66d9ef>SELECT</span> query, mean_time, calls 
</span></span><span style=display:flex><span><span style=color:#66d9ef>FROM</span> pg_stat_statements 
</span></span><span style=display:flex><span><span style=color:#66d9ef>ORDER</span> <span style=color:#66d9ef>BY</span> mean_time <span style=color:#66d9ef>DESC</span> 
</span></span><span style=display:flex><span><span style=color:#66d9ef>LIMIT</span> <span style=color:#ae81ff>10</span>;
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e>-- Ki·ªÉm tra s·ª≠ d·ª•ng ch·ªâ m·ª•c
</span></span></span><span style=display:flex><span><span style=color:#75715e></span><span style=color:#66d9ef>SELECT</span> schemaname, tablename, indexname, idx_scan, idx_tup_read, idx_tup_fetch
</span></span><span style=display:flex><span><span style=color:#66d9ef>FROM</span> pg_stat_user_indexes
</span></span><span style=display:flex><span><span style=color:#66d9ef>ORDER</span> <span style=color:#66d9ef>BY</span> idx_scan <span style=color:#66d9ef>DESC</span>;
</span></span></code></pre></div><h3 id=mysql>MySQL</h3><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-sql data-lang=sql><span style=display:flex><span><span style=color:#75715e>-- Ph√¢n t√≠ch truy v·∫•n
</span></span></span><span style=display:flex><span><span style=color:#75715e></span><span style=color:#66d9ef>EXPLAIN</span> FORMAT<span style=color:#f92672>=</span>JSON <span style=color:#66d9ef>SELECT</span> <span style=color:#f92672>*</span> <span style=color:#66d9ef>FROM</span> orders <span style=color:#66d9ef>WHERE</span> customer_id <span style=color:#f92672>=</span> <span style=color:#ae81ff>123</span>;
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e>-- T√¨m c√°c truy v·∫•n ch·∫≠m
</span></span></span><span style=display:flex><span><span style=color:#75715e></span><span style=color:#66d9ef>SELECT</span> DIGEST_TEXT, AVG_TIMER_WAIT<span style=color:#f92672>/</span><span style=color:#ae81ff>1000000000</span> <span style=color:#66d9ef>as</span> avg_time_sec, COUNT_STAR
</span></span><span style=display:flex><span><span style=color:#66d9ef>FROM</span> performance_schema.events_statements_summary_by_digest
</span></span><span style=display:flex><span><span style=color:#66d9ef>ORDER</span> <span style=color:#66d9ef>BY</span> AVG_TIMER_WAIT <span style=color:#66d9ef>DESC</span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>LIMIT</span> <span style=color:#ae81ff>10</span>;
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e>-- Ki·ªÉm tra s·ª≠ d·ª•ng ch·ªâ m·ª•c
</span></span></span><span style=display:flex><span><span style=color:#75715e></span><span style=color:#66d9ef>SHOW</span> <span style=color:#66d9ef>INDEX</span> <span style=color:#66d9ef>FROM</span> orders;
</span></span></code></pre></div><hr><h2 id=-c√°c-m·∫´u-t·ªëi-∆∞u-h√≥a-ph·ªï-bi·∫øn>üìà C√°c m·∫´u t·ªëi ∆∞u h√≥a ph·ªï bi·∫øn</h2><h3 id=1-t·ªëi-∆∞u-h√≥a-join>1. T·ªëi ∆∞u h√≥a JOIN</h3><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-sql data-lang=sql><span style=display:flex><span><span style=color:#75715e>-- Tr∆∞·ªõc: Subquery kh√¥ng hi·ªáu qu·∫£
</span></span></span><span style=display:flex><span><span style=color:#75715e></span><span style=color:#66d9ef>SELECT</span> <span style=color:#f92672>*</span> <span style=color:#66d9ef>FROM</span> customers 
</span></span><span style=display:flex><span><span style=color:#66d9ef>WHERE</span> id <span style=color:#66d9ef>IN</span> (<span style=color:#66d9ef>SELECT</span> customer_id <span style=color:#66d9ef>FROM</span> orders <span style=color:#66d9ef>WHERE</span> total <span style=color:#f92672>&gt;</span> <span style=color:#ae81ff>1000</span>);
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e>-- Sau: JOIN hi·ªáu qu·∫£ h∆°n
</span></span></span><span style=display:flex><span><span style=color:#75715e></span><span style=color:#66d9ef>SELECT</span> <span style=color:#66d9ef>DISTINCT</span> <span style=color:#66d9ef>c</span>.<span style=color:#f92672>*</span> <span style=color:#66d9ef>FROM</span> customers <span style=color:#66d9ef>c</span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>INNER</span> <span style=color:#66d9ef>JOIN</span> orders o <span style=color:#66d9ef>ON</span> <span style=color:#66d9ef>c</span>.id <span style=color:#f92672>=</span> o.customer_id
</span></span><span style=display:flex><span><span style=color:#66d9ef>WHERE</span> o.total <span style=color:#f92672>&gt;</span> <span style=color:#ae81ff>1000</span>;
</span></span></code></pre></div><h3 id=2-t·ªëi-∆∞u-h√≥a-ph√¢n-trang>2. T·ªëi ∆∞u h√≥a ph√¢n trang</h3><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-sql data-lang=sql><span style=display:flex><span><span style=color:#75715e>-- Tr∆∞·ªõc: OFFSET kh√¥ng hi·ªáu qu·∫£ cho trang l·ªõn
</span></span></span><span style=display:flex><span><span style=color:#75715e></span><span style=color:#66d9ef>SELECT</span> <span style=color:#f92672>*</span> <span style=color:#66d9ef>FROM</span> products <span style=color:#66d9ef>ORDER</span> <span style=color:#66d9ef>BY</span> created_at <span style=color:#66d9ef>OFFSET</span> <span style=color:#ae81ff>10000</span> <span style=color:#66d9ef>LIMIT</span> <span style=color:#ae81ff>20</span>;
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e>-- Sau: Cursor-based pagination
</span></span></span><span style=display:flex><span><span style=color:#75715e></span><span style=color:#66d9ef>SELECT</span> <span style=color:#f92672>*</span> <span style=color:#66d9ef>FROM</span> products 
</span></span><span style=display:flex><span><span style=color:#66d9ef>WHERE</span> created_at <span style=color:#f92672>&gt;</span> <span style=color:#e6db74>&#39;2023-01-01 10:00:00&#39;</span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>ORDER</span> <span style=color:#66d9ef>BY</span> created_at <span style=color:#66d9ef>LIMIT</span> <span style=color:#ae81ff>20</span>;
</span></span></code></pre></div><h3 id=3-t·ªëi-∆∞u-h√≥a-count>3. T·ªëi ∆∞u h√≥a COUNT</h3><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-sql data-lang=sql><span style=display:flex><span><span style=color:#75715e>-- Tr∆∞·ªõc: COUNT(*) ch·∫≠m tr√™n b·∫£ng l·ªõn
</span></span></span><span style=display:flex><span><span style=color:#75715e></span><span style=color:#66d9ef>SELECT</span> <span style=color:#66d9ef>COUNT</span>(<span style=color:#f92672>*</span>) <span style=color:#66d9ef>FROM</span> orders <span style=color:#66d9ef>WHERE</span> status <span style=color:#f92672>=</span> <span style=color:#e6db74>&#39;completed&#39;</span>;
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e>-- Sau: S·ª≠ d·ª•ng approximate count ho·∫∑c cached value
</span></span></span><span style=display:flex><span><span style=color:#75715e></span><span style=color:#66d9ef>SELECT</span> reltuples::BIGINT <span style=color:#66d9ef>AS</span> estimate
</span></span><span style=display:flex><span><span style=color:#66d9ef>FROM</span> pg_class
</span></span><span style=display:flex><span><span style=color:#66d9ef>WHERE</span> relname <span style=color:#f92672>=</span> <span style=color:#e6db74>&#39;orders&#39;</span>;
</span></span></code></pre></div><hr><h2 id=-best-practices>üéØ Best Practices</h2><h3 id=thi·∫øt-k·∫ø-truy-v·∫•n>Thi·∫øt k·∫ø truy v·∫•n</h3><ol><li><strong>S·ª≠ d·ª•ng WHERE clauses hi·ªáu qu·∫£</strong>: ƒê·∫∑t ƒëi·ªÅu ki·ªán selective nh·∫•t tr∆∞·ªõc</li><li>**Tr√°nh SELECT ***: Ch·ªâ ch·ªçn c√°c c·ªôt c·∫ßn thi·∫øt</li><li><strong>S·ª≠ d·ª•ng LIMIT</strong>: Gi·ªõi h·∫°n k·∫øt qu·∫£ khi c√≥ th·ªÉ</li><li><strong>T·ªëi ∆∞u h√≥a ORDER BY</strong>: S·ª≠ d·ª•ng ch·ªâ m·ª•c cho sorting</li></ol><h3 id=thi·∫øt-k·∫ø-ch·ªâ-m·ª•c>Thi·∫øt k·∫ø ch·ªâ m·ª•c</h3><ol><li><strong>Ch·ªâ m·ª•c composite</strong>: Th·ª© t·ª± c·ªôt quan tr·ªçng</li><li><strong>Ch·ªâ m·ª•c covering</strong>: Bao g·ªìm t·∫•t c·∫£ c·ªôt c·∫ßn thi·∫øt</li><li><strong>Ch·ªâ m·ª•c partial</strong>: Cho c√°c ƒëi·ªÅu ki·ªán c·ª• th·ªÉ</li><li><strong>B·∫£o tr√¨ ch·ªâ m·ª•c</strong>: X√≥a c√°c ch·ªâ m·ª•c kh√¥ng s·ª≠ d·ª•ng</li></ol><h3 id=gi√°m-s√°t-hi·ªáu-su·∫•t>Gi√°m s√°t hi·ªáu su·∫•t</h3><ol><li><strong>Theo d√µi slow queries</strong>: Thi·∫øt l·∫≠p thresholds ph√π h·ª£p</li><li><strong>Ph√¢n t√≠ch execution plans</strong>: Hi·ªÉu chi ph√≠ truy v·∫•n</li><li><strong>Gi√°m s√°t resource usage</strong>: CPU, I/O, memory</li><li><strong>Benchmark th∆∞·ªùng xuy√™n</strong>: So s√°nh hi·ªáu su·∫•t theo th·ªùi gian</li></ol><hr><h2 id=-b∆∞·ªõc-ti·∫øp-theo>üîó B∆∞·ªõc ti·∫øp theo</h2><ol><li><strong><a href=/vi/query-optimization/index-strategies/>Chi·∫øn l∆∞·ª£c ch·ªâ m·ª•c</a></strong> - H·ªçc c√°c k·ªπ thu·∫≠t indexing n√¢ng cao</li><li><strong><a href=/vi/query-optimization/query-rewriting/>Vi·∫øt l·∫°i truy v·∫•n</a></strong> - Th√†nh th·∫°o c√°c m·∫´u t·ªëi ∆∞u h√≥a truy v·∫•n</li><li><strong><a href=/vi/query-optimization/execution-plans/>K·∫ø ho·∫°ch th·ª±c thi</a></strong> - Hi·ªÉu v√† ph√¢n t√≠ch query plans</li></ol></div></div></section><script>document.getElementById("sidebar-toggle").addEventListener("click",function(e){e.preventDefault(),document.getElementById("sidebar").classList.toggle("open")})</script></body></html>