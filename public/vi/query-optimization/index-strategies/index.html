<!doctype html><html lang=vi><head><meta charset=UTF-8><meta name=viewport content="width=device-width,initial-scale=1"><title>Chiến lược Index - RDS Performance Insights & Tối Ưu Hóa Truy Vấn</title>
<link rel=stylesheet href=https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css><link rel=stylesheet href=/css/theme-blue.css><style>*{margin:0;padding:0;box-sizing:border-box}body{font-family:work sans,helvetica,tahoma,geneva,arial,sans-serif;font-weight:300;line-height:1.6;font-size:18px;color:var(--MAIN-TEXT-color,#323232)}#sidebar{position:fixed;top:0;left:0;width:300px;height:100vh;background:var(--MENU-SECTIONS-BG-color,#252c31);color:#ccc;overflow-y:auto;z-index:1000}#sidebar #header{padding:2rem 1rem;text-align:center;background:var(--MENU-HEADER-BG-color,#1C90F3);border-bottom:1px solid var(--MENU-HEADER-BORDER-color,#33a1ff)}#sidebar #header .baseurl{color:var(--MENU-SEARCH-BOX-color,#33a1ff);font-size:1.5rem;font-weight:700}#sidebar .searchbox{padding:10px;background:var(--MENU-SEARCH-BG-color,#167ad0);border-bottom:1px solid var(--MENU-SEARCH-BOX-color,#33a1ff)}#sidebar .searchbox input{width:100%;padding:10px;border:1px solid var(--MENU-SEARCH-BOX-color,#33a1ff);background:rgba(255,255,255,.1);color:var(--MENU-SEARCH-BOX-ICONS-color,#a1d2fd);border-radius:4px}#sidebar-toggle-span{display:none}#body{margin-left:300px}#body .padding{padding:3rem 6rem}#sidebar ul{list-style:none;padding:0;margin:0}#sidebar ul li a{display:block;padding:10px 20px;color:var(--MENU-SECTIONS-LINK-color,#ccc);text-decoration:none;border-left:4px solid transparent}#sidebar ul li a:hover{background:var(--MENU-SECTIONS-ACTIVE-BG-color,#20272b);border-left-color:var(--MAIN-LINK-color,#1C90F3);color:var(--MENU-SECTIONS-LINK-HOVER-color,#e6e6e6)}#sidebar ul li.active>a{background:var(--MENU-SECTION-ACTIVE-CATEGORY-BG-color,#fff);border-left-color:var(--MAIN-LINK-color,#1C90F3);color:var(--MENU-SECTION-ACTIVE-CATEGORY-color,#777)}#sidebar ul ul{padding-left:20px}#sidebar ul ul li a{padding:8px 20px;font-size:.9em}.language-switcher{position:relative;padding:20px}.language-switcher a{color:var(--MAIN-LINK-color,#1C90F3);text-decoration:none;margin-left:10px}.language-switcher a:hover{color:var(--MAIN-LINK-HOVER-color,#167ad0)}h1,h2,h3,h4,h5,h6{color:var(--MAIN-TITLES-TEXT-color,#5e5e5e);font-weight:400}h1{font-size:3rem}h2{font-size:2.5rem}h3{font-size:2rem}a{color:var(--MAIN-LINK-color,#1C90F3)}a:hover{color:var(--MAIN-LINK-HOVER-color,#167ad0)}pre{background:#f8f8f8;padding:1rem;border-radius:4px;overflow-x:auto}code{background:#f8f8f8;padding:.2rem .4rem;border-radius:3px;font-size:.9em}.breadcrumbs{margin-bottom:2rem;color:#999}.breadcrumbs a{color:var(--MAIN-LINK-color,#1C90F3);text-decoration:none}.breadcrumbs a:hover{color:var(--MAIN-LINK-HOVER-color,#167ad0);text-decoration:underline}@media(max-width:768px){#sidebar{transform:translateX(-300px);transition:transform .3s}#sidebar.open{transform:translateX(0)}#body{margin-left:0}#body .padding{padding:1rem 2rem}#sidebar-toggle-span{display:block;position:fixed;top:10px;left:10px;z-index:1001}#sidebar-toggle{background:var(--MAIN-LINK-color,#1C90F3);color:#fff;padding:10px;border:none;border-radius:4px}}</style></head><body><nav id=sidebar><div id=header><a id=logo href=/><div style=text-align:center;padding:20px><h2 style=color:var(--MENU-SEARCH-BOX-color,#33a1ff);font-size:2rem;font-weight:700;margin:0>LEARN</h2><p style="color:var(--MENU-SEARCH-BOX-ICONS-color,#a1d2fd);font-size:.9rem;margin:5px 0 0">RDS Performance Insights</p></div></a></div><div class=searchbox><input type=search placeholder=Search... id=search-input></div><ul class=topics><li><a href=http://localhost:1313/><i class="fas fa-home"></i> Home</a></li><li><a href=/vi/introduction/><i class="fas fa-book"></i> 1. Giới Thiệu</a></li><li><a href=/vi/preparation/><i class="fas fa-book"></i> 2. Chuẩn Bị</a></li><li><a href=/vi/performance-baseline/><i class="fas fa-book"></i> 3. Thiết lập Đường cơ sở Hiệu suất</a></li><li><a href=/vi/performance-insights/><i class="fas fa-book"></i> Performance Insights</a></li><li><a href=/vi/monitoring-dashboard/><i class="fas fa-book"></i> 4. Bảng điều khiển Giám sát</a></li><li><a href=/vi/alerting-system/><i class="fas fa-book"></i> 5. Hệ thống Cảnh báo</a></li><li class=active><a href=/vi/query-optimization/><i class="fas fa-book"></i> 6. Kỹ thuật Tối ưu hóa Truy vấn</a><ul><li><a href=/vi/query-optimization/overview/>Tổng quan</a></li><li class=active><a href=/vi/query-optimization/index-strategies/>Chiến lược Index</a></li><li><a href=/vi/query-optimization/query-rewriting/>Viết lại Truy vấn</a></li><li><a href=/vi/query-optimization/execution-plans/>Kế hoạch Thực thi</a></li></ul></li><li><a href=/vi/automated-tuning/><i class="fas fa-book"></i> 7. Đề xuất Điều chỉnh Tự động</a></li><li><a href=/vi/capacity-planning/><i class="fas fa-book"></i> 8. Lập kế hoạch Năng lực</a></li><li><a href=/vi/monitoring/><i class="fas fa-book"></i> 9. Giám sát & Cảnh báo</a></li><li><a href=/vi/best-practices/><i class="fas fa-book"></i> 10. Dọn dẹp Tài nguyên</a></li></ul><div class=language-switcher><a href=/vi/en><i class="fas fa-language"></i> English</a></div></nav><span id=sidebar-toggle-span><a href=# id=sidebar-toggle><i class="fas fa-bars"></i></a></span><section id=body><div id=overlay></div><div class=padding><div id=body-inner><div class=breadcrumbs><a href=http://localhost:1313/>Home</a>
<span>> </span><a href=/vi/>RDS Performance Insights & Tối Ưu Hóa Truy Vấn</a>
<span>> </span><a href=/vi/query-optimization/>6. Kỹ thuật Tối ưu hóa Truy vấn</a>
<span>> </span>Chiến lược Index</div><h1>Chiến lược Index</h1><h1 id=chiến-lược-index---học-các-kỹ-thuật-lập-chỉ-mục-nâng-cao>Chiến lược Index - Học các kỹ thuật lập chỉ mục nâng cao</h1><p>Việc sử dụng index hiệu quả là yếu tố quan trọng nhất để tăng tốc độ truy vấn. Một index giống như mục lục của một cuốn sách, giúp cơ sở dữ liệu tìm kiếm dữ liệu nhanh hơn mà không cần quét toàn bộ bảng.</p><h2 id=tầm-quan-trọng-của-index>Tầm quan trọng của Index</h2><p>Khi một truy vấn được thực thi, nếu không có index phù hợp, cơ sở dữ liệu phải thực hiện quét toàn bộ bảng (full table scan) để tìm kiếm dữ liệu, đặc biệt tốn kém với bảng lớn. Index giúp cơ sở dữ liệu định vị các hàng dữ liệu cần thiết một cách trực tiếp hơn.</p><h2 id=các-loại-index-cơ-bản>Các loại Index cơ bản</h2><h3 id=primary-key-index-index-khóa-chính>Primary Key Index (Index Khóa Chính)</h3><ul><li>Tự động tạo khi bạn định nghĩa khóa chính</li><li>Đảm bảo tính duy nhất và không cho phép giá trị NULL</li></ul><h3 id=unique-index-index-duy-nhất>Unique Index (Index Duy nhất)</h3><ul><li>Đảm bảo tất cả các giá trị trong cột được lập chỉ mục là duy nhất</li><li>Cho phép một giá trị NULL duy nhất</li></ul><h3 id=non-unique-index-index-không-duy-nhất>Non-Unique Index (Index Không duy nhất)</h3><ul><li>Index thông thường, cho phép các giá trị trùng lặp</li></ul><h2 id=các-kỹ-thuật-index-nâng-cao>Các kỹ thuật Index nâng cao</h2><h3 id=composite-indexes-index-hợp-phầnđa-cột>Composite Indexes (Index Hợp phần/Đa cột)</h3><p>Tạo index trên nhiều cột:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-sql data-lang=sql><span style=display:flex><span><span style=color:#66d9ef>CREATE</span> <span style=color:#66d9ef>INDEX</span> idx_name_dob <span style=color:#66d9ef>ON</span> users (last_name, first_name, date_of_birth);
</span></span></code></pre></div><p><strong>Thứ tự cột rất quan trọng</strong>: Thứ tự của các cột trong index phải phù hợp với các cột trong mệnh đề WHERE, ORDER BY, và GROUP BY của truy vấn để đạt hiệu quả tối đa.</p><p>Ví dụ:</p><ul><li><code>WHERE last_name = 'Smith' AND first_name = 'John'</code> sẽ sử dụng được index trên (last_name, first_name)</li><li><code>WHERE first_name = 'John'</code> sẽ không tận dụng được hoàn toàn index này (chỉ sử dụng được phần đầu của index nếu có)</li></ul><p><strong>Tối ưu hóa &ldquo;Leftmost Prefix&rdquo;</strong>: Index hợp phần chỉ hiệu quả khi bạn sử dụng các cột từ bên trái sang phải của index trong mệnh đề WHERE của bạn.</p><h3 id=covering-indexes-index-bao-phủ>Covering Indexes (Index Bao phủ)</h3><p>Một index bao phủ là một index chứa tất cả các cột mà truy vấn cần (trong mệnh đề SELECT, WHERE, ORDER BY, GROUP BY).</p><p>Khi có một index bao phủ, cơ sở dữ liệu không cần phải truy cập bảng gốc để lấy thêm dữ liệu, giúp tăng tốc độ đáng kể.</p><p>Ví dụ:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-sql data-lang=sql><span style=display:flex><span><span style=color:#66d9ef>SELECT</span> first_name, last_name <span style=color:#66d9ef>FROM</span> users <span style=color:#66d9ef>WHERE</span> last_name <span style=color:#f92672>=</span> <span style=color:#e6db74>&#39;Smith&#39;</span>;
</span></span></code></pre></div><p>Có thể được bao phủ bởi <code>idx_name_dob</code> nếu <code>first_name</code> cũng là một phần của index. EXPLAIN sẽ hiển thị &ldquo;Using index&rdquo; trong cột Extra.</p><h3 id=functional-indexes-index-hàm>Functional Indexes (Index Hàm)</h3><p>(Phổ biến hơn trong PostgreSQL, Oracle, nhưng MySQL cũng có giới hạn)</p><p>Cho phép lập chỉ mục trên kết quả của một hàm hoặc biểu thức. Hữu ích khi bạn thường xuyên truy vấn dựa trên các giá trị đã được tính toán.</p><h3 id=partial-indexes-index-một-phần>Partial Indexes (Index một phần)</h3><p>(Phổ biến hơn trong PostgreSQL)</p><p>Chỉ lập chỉ mục cho một tập hợp con của các hàng trong bảng dựa trên một điều kiện nhất định. Giúp giảm kích thước index và tăng tốc độ cho các truy vấn nhắm mục tiêu vào tập dữ liệu đó. (MySQL có thể mô phỏng bằng cách sử dụng các chiến lược khác nhau).</p><h2 id=khi-nào-nên-và-không-nên-dùng-index>Khi nào nên và không nên dùng Index</h2><h3 id=nên-dùng>Nên dùng:</h3><ul><li>Các cột thường xuyên xuất hiện trong WHERE, JOIN, ORDER BY, GROUP BY</li><li>Các cột có nhiều giá trị duy nhất</li></ul><h3 id=không-nên-dùng>Không nên dùng:</h3><ul><li>Các cột có rất ít giá trị duy nhất (ví dụ: gender)</li><li>Các bảng rất nhỏ</li><li>Các bảng có tần suất ghi (INSERT/UPDATE/DELETE) rất cao, vì mỗi lần ghi phải cập nhật index, gây ra chi phí I/O</li></ul><h2 id=công-cụ>Công cụ</h2><ul><li>Sử dụng <strong>EXPLAIN</strong> để xác định các truy vấn không sử dụng index hoặc sử dụng không hiệu quả</li><li><strong>Database Insights</strong> sẽ cho bạn thấy các truy vấn chậm nhất, là những ứng cử viên hàng đầu để lập chỉ mục</li></ul><hr><p><em>Tiếp theo: Tìm hiểu về các kỹ thuật <a href=../query-rewriting/>Viết lại Truy vấn</a> để tối ưu hóa câu lệnh SQL.</em></p></div></div></section><script>document.getElementById("sidebar-toggle").addEventListener("click",function(e){e.preventDefault(),document.getElementById("sidebar").classList.toggle("open")})</script></body></html>