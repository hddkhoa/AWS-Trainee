<!doctype html><html lang=vi><head><meta charset=UTF-8><meta name=viewport content="width=device-width,initial-scale=1"><title>Thiết lập RDS Instance với Performance Insights - RDS Performance Insights & Tối Ưu Hóa Truy Vấn</title>
<link rel=stylesheet href=https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css><link rel=stylesheet href=/css/theme-blue.css><style>*{margin:0;padding:0;box-sizing:border-box}body{font-family:work sans,helvetica,tahoma,geneva,arial,sans-serif;font-weight:300;line-height:1.6;font-size:18px;color:var(--MAIN-TEXT-color,#323232)}#sidebar{position:fixed;top:0;left:0;width:300px;height:100vh;background:var(--MENU-SECTIONS-BG-color,#252c31);color:#ccc;overflow-y:auto;z-index:1000}#sidebar #header{padding:2rem 1rem;text-align:center;background:var(--MENU-HEADER-BG-color,#1C90F3);border-bottom:1px solid var(--MENU-HEADER-BORDER-color,#33a1ff)}#sidebar #header .baseurl{color:var(--MENU-SEARCH-BOX-color,#33a1ff);font-size:1.5rem;font-weight:700}#sidebar .searchbox{padding:10px;background:var(--MENU-SEARCH-BG-color,#167ad0);border-bottom:1px solid var(--MENU-SEARCH-BOX-color,#33a1ff)}#sidebar .searchbox input{width:100%;padding:10px;border:1px solid var(--MENU-SEARCH-BOX-color,#33a1ff);background:rgba(255,255,255,.1);color:var(--MENU-SEARCH-BOX-ICONS-color,#a1d2fd);border-radius:4px}#sidebar-toggle-span{display:none}#body{margin-left:300px}#body .padding{padding:3rem 6rem}#sidebar ul{list-style:none;padding:0;margin:0}#sidebar ul li a{display:block;padding:10px 20px;color:var(--MENU-SECTIONS-LINK-color,#ccc);text-decoration:none;border-left:4px solid transparent}#sidebar ul li a:hover{background:var(--MENU-SECTIONS-ACTIVE-BG-color,#20272b);border-left-color:var(--MAIN-LINK-color,#1C90F3);color:var(--MENU-SECTIONS-LINK-HOVER-color,#e6e6e6)}#sidebar ul li.active>a{background:var(--MENU-SECTION-ACTIVE-CATEGORY-BG-color,#fff);border-left-color:var(--MAIN-LINK-color,#1C90F3);color:var(--MENU-SECTION-ACTIVE-CATEGORY-color,#777)}#sidebar ul ul{padding-left:20px}#sidebar ul ul li a{padding:8px 20px;font-size:.9em}.language-switcher{position:relative;padding:20px}.language-switcher a{color:var(--MAIN-LINK-color,#1C90F3);text-decoration:none;margin-left:10px}.language-switcher a:hover{color:var(--MAIN-LINK-HOVER-color,#167ad0)}h1,h2,h3,h4,h5,h6{color:var(--MAIN-TITLES-TEXT-color,#5e5e5e);font-weight:400}h1{font-size:3rem}h2{font-size:2.5rem}h3{font-size:2rem}a{color:var(--MAIN-LINK-color,#1C90F3)}a:hover{color:var(--MAIN-LINK-HOVER-color,#167ad0)}pre{background:#f8f8f8;padding:1rem;border-radius:4px;overflow-x:auto}code{background:#f8f8f8;padding:.2rem .4rem;border-radius:3px;font-size:.9em}.breadcrumbs{margin-bottom:2rem;color:#999}.breadcrumbs a{color:var(--MAIN-LINK-color,#1C90F3);text-decoration:none}.breadcrumbs a:hover{color:var(--MAIN-LINK-HOVER-color,#167ad0);text-decoration:underline}@media(max-width:768px){#sidebar{transform:translateX(-300px);transition:transform .3s}#sidebar.open{transform:translateX(0)}#body{margin-left:0}#body .padding{padding:1rem 2rem}#sidebar-toggle-span{display:block;position:fixed;top:10px;left:10px;z-index:1001}#sidebar-toggle{background:var(--MAIN-LINK-color,#1C90F3);color:#fff;padding:10px;border:none;border-radius:4px}}</style></head><body><nav id=sidebar><div id=header><a id=logo href=/><div style=text-align:center;padding:20px><h2 style=color:var(--MENU-SEARCH-BOX-color,#33a1ff);font-size:2rem;font-weight:700;margin:0>LEARN</h2><p style="color:var(--MENU-SEARCH-BOX-ICONS-color,#a1d2fd);font-size:.9rem;margin:5px 0 0">RDS Performance Insights</p></div></a></div><div class=searchbox><input type=search placeholder=Search... id=search-input></div><ul class=topics><li><a href=http://localhost:1313/><i class="fas fa-home"></i> Home</a></li><li><a href=/vi/introduction/><i class="fas fa-book"></i> 1. Giới Thiệu</a></li><li><a href=/vi/preparation/><i class="fas fa-book"></i> 2. Chuẩn Bị</a></li><li><a href=/vi/performance-baseline/><i class="fas fa-book"></i> 3. Thiết lập Đường cơ sở Hiệu suất</a></li><li class=active><a href=/vi/performance-insights/><i class="fas fa-book"></i> Performance Insights</a><ul><li><a href=/vi/performance-insights/overview/>Tổng quan về Performance Insights</a></li><li class=active><a href=/vi/performance-insights/setup/>Thiết lập RDS Instance với Performance Insights</a></li><li><a href=/vi/performance-insights/dashboard/>Hiểu về Dashboard Performance Insights</a></li><li><a href=/vi/performance-insights/optimization/>Tối ưu hóa Query với Performance Insights</a></li></ul></li><li><a href=/vi/monitoring-dashboard/><i class="fas fa-book"></i> 4. Bảng điều khiển Giám sát</a></li><li><a href=/vi/alerting-system/><i class="fas fa-book"></i> 5. Hệ thống Cảnh báo</a></li><li><a href=/vi/query-optimization/><i class="fas fa-book"></i> 6. Kỹ thuật Tối ưu hóa Truy vấn</a></li><li><a href=/vi/automated-tuning/><i class="fas fa-book"></i> 7. Đề xuất Điều chỉnh Tự động</a></li><li><a href=/vi/capacity-planning/><i class="fas fa-book"></i> 8. Lập kế hoạch Năng lực</a></li><li><a href=/vi/monitoring/><i class="fas fa-book"></i> 9. Giám sát & Cảnh báo</a></li><li><a href=/vi/best-practices/><i class="fas fa-book"></i> 10. Dọn dẹp tài nguyên</a></li></ul><div class=language-switcher><a href=/vi/en><i class="fas fa-language"></i> English</a></div></nav><span id=sidebar-toggle-span><a href=# id=sidebar-toggle><i class="fas fa-bars"></i></a></span><section id=body><div id=overlay></div><div class=padding><div id=body-inner><div class=breadcrumbs><a href=http://localhost:1313/>Home</a>
<span>> </span><a href=/vi/>RDS Performance Insights & Tối Ưu Hóa Truy Vấn</a>
<span>> </span><a href=/vi/performance-insights/>Performance Insights</a>
<span>> </span>Thiết lập RDS Instance với Performance Insights</div><h1>Thiết lập RDS Instance với Performance Insights</h1><h2 id=1-tạo-rds-instance-với-performance-insights>1. Tạo RDS Instance với Performance Insights</h2><h3 id=bước-1-truy-cập-rds-console>Bước 1: Truy cập RDS Console</h3><ol><li>Đăng nhập vào AWS Console</li><li>Tìm kiếm &ldquo;RDS&rdquo; trong thanh tìm kiếm</li><li>Click vào &ldquo;Amazon RDS&rdquo;</li></ol><h3 id=bước-2-tạo-database>Bước 2: Tạo Database</h3><img src=/images/2025-07-14_15-55-30.png alt=2025-07-14_15-55-30 width=800><ol><li>Click nút &ldquo;Create database&rdquo; màu cam</li><li>Chọn &ldquo;Standard create&rdquo; (không chọn Easy create)</li><li>Engine options:
• Chọn MySQL (hoặc PostgreSQL tùy nhu cầu)
• Version: Chọn phiên bản mới nhất (ví dụ: MySQL 8.0.35)</li></ol><h3 id=bước-3-templates-và-settings>Bước 3: Templates và Settings</h3><img src=/images/2025-07-14_15-58-04.png alt=2025-07-14_15-58-04 width=800><ol><li>Templates: Chọn &ldquo;Free tier&rdquo; (nếu đủ điều kiện) hoặc &ldquo;Dev/Test&rdquo;</li><li>Settings:
• <strong>DB instance identifier:</strong> mydb-performance-test
• <strong>Master username:</strong> admin
• <strong>Master password:</strong> Tạo mật khẩu mạnh hoặc chọn &ldquo;Auto generate&rdquo;</li></ol><h3 id=bước-4-instance-configuration>Bước 4: Instance Configuration</h3><img src=/images/2025-07-14_16-02-05.png alt=2025-07-14_16-02-05 width=800><ol><li>DB instance class:
• Chọn &ldquo;Burstable classes (includes t classes)&rdquo;
• Chọn db.t3.micro (Free tier) hoặc db.t3.small</li><li>Storage:
• <strong>Storage type:</strong> General Purpose SSD (gp2)
• <strong>Allocated storage:</strong> 20 GB
• Bỏ tick &ldquo;Enable storage autoscaling&rdquo; (để tiết kiệm chi phí)</li></ol><h3 id=bước-5-connectivity>Bước 5: Connectivity</h3><img src=/images/2025-07-14_16-03-40.png alt=2025-07-14_16-03-40 width=800><ol><li>Virtual private cloud (VPC): Chọn Default VPC</li><li>Subnet group: default</li><li>Public access: Chọn &ldquo;Yes&rdquo; (để test từ bên ngoài)</li><li>VPC security group:
• Chọn &ldquo;Create new&rdquo;
• <strong>New VPC security group name:</strong> rds-performance-sg</li></ol><h3 id=bước-6-database-authentication>Bước 6: Database Authentication</h3><ol><li>Database authentication: Chọn &ldquo;Password authentication&rdquo;</li></ol><h3 id=bước-7-monitoring>Bước 7: Monitoring</h3><div class="notices warning"><div class=label><i class="fas fa-exclamation-triangle"></i>
Warning</div><div class=content>(Quan trọng!)</div></div><img src=/images/2025-07-14_16-08-09.png alt=2025-07-14_16-08-09 width=800><ol><li>Enable Enhanced monitoring: Tick chọn
• <strong>Granularity:</strong> 60 seconds
• <strong>Monitoring Role:</strong> Chọn &ldquo;Default&rdquo; hoặc tạo mới</li><li><strong>Enable Performance Insights: TICK CHỌN ✅</strong>
• <strong>Retention period:</strong> Chọn &ldquo;7 days (free)&rdquo;
• <strong>Master key:</strong> Chọn &ldquo;Default&rdquo;</li></ol><h3 id=bước-8-additional-configuration>Bước 8: Additional Configuration</h3><img src=/images/2025-07-14_16-10-09.png alt=2025-07-14_16-10-09 width=800><ol><li>Initial database name: testdb</li><li>DB parameter group: default</li><li>Backup:
• <strong>Backup retention period:</strong> 7 days
• <strong>Backup window:</strong> Chọn thời gian ít sử dụng</li><li>Maintenance:
• <strong>Enable auto minor version upgrade:</strong> Tick
• <strong>Maintenance window:</strong> Chọn thời gian ít sử dụng</li></ol><h3 id=bước-9-tạo-database>Bước 9: Tạo Database</h3><img src=/images/2025-07-14_16-11-19.png alt=2025-07-14_16-11-19 width=800>
<img src=/images/2025-07-14_16-45-15.png alt=2025-07-14_16-45-15 width=800>
1. Click "Create database"
2. Đợi 10-15 phút để database được tạo
3. Trạng thái sẽ chuyển từ "Creating" → "Available"<h2 id=2-kích-hoạt-performance-insights-cho-rds-hiện-có>2. Kích hoạt Performance Insights cho RDS hiện có</h2><p>Nếu bạn đã có RDS instance và muốn kích hoạt Performance Insights:</p><h3 id=bước-1-chọn-database>Bước 1: Chọn Database</h3><img src=/images/22.png alt=22 width=800><ol><li>Vào RDS Console</li><li>Click vào &ldquo;Databases&rdquo; ở sidebar</li><li>Chọn database instance cần kích hoạt</li></ol><h3 id=bước-2-modify-database>Bước 2: Modify Database</h3><img src=/images/33.png alt=33 width=800><ol><li>Click nút &ldquo;Modify&rdquo;</li><li>Scroll xuống phần &ldquo;Monitoring&rdquo;</li><li>Tìm &ldquo;Performance Insights&rdquo;</li><li>Tick chọn &ldquo;Enable Performance Insights&rdquo;</li><li>Chọn retention period (7 days free)</li><li>Click &ldquo;Continue&rdquo;</li></ol><h3 id=bước-3-apply-changes>Bước 3: Apply Changes</h3><ol><li>Chọn &ldquo;Apply immediately&rdquo; hoặc &ldquo;Apply during maintenance window&rdquo;</li><li>Click &ldquo;Modify DB instance&rdquo;</li></ol><h2 id=3-xác-minh-performance-insights-đã-hoạt-động>3. Xác minh Performance Insights đã hoạt động</h2><h3 id=kiểm-tra-trạng-thái>Kiểm tra trạng thái:</h3><ol><li>Vào RDS Console</li><li>Chọn database instance</li><li>Tab &ldquo;Configuration&rdquo; → kiểm tra &ldquo;Performance Insights&rdquo; = Enabled</li><li>Tab &ldquo;Monitoring&rdquo; → sẽ có link &ldquo;View in Performance Insights&rdquo;</li></ol><h3 id=truy-cập-performance-insights-dashboard>Truy cập Performance Insights Dashboard:</h3><ol><li>Click &ldquo;View in Performance Insights&rdquo;</li><li>Hoặc vào menu &ldquo;Performance Insights&rdquo; ở sidebar RDS</li><li>Chọn database từ dropdown</li></ol><h2 id=4-cấu-hình-security-group>4. Cấu hình Security Group</h2><p>Để kết nối từ bên ngoài, cần cấu hình Security Group:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span><span style=color:#75715e># Tìm Security Group ID</span>
</span></span><span style=display:flex><span>aws ec2 describe-security-groups --group-names rds-performance-sg
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e># Thêm rule cho MySQL (port 3306)</span>
</span></span><span style=display:flex><span>aws ec2 authorize-security-group-ingress <span style=color:#ae81ff>\
</span></span></span><span style=display:flex><span><span style=color:#ae81ff></span>    --group-id sg-xxxxxxxxx <span style=color:#ae81ff>\
</span></span></span><span style=display:flex><span><span style=color:#ae81ff></span>    --protocol tcp <span style=color:#ae81ff>\
</span></span></span><span style=display:flex><span><span style=color:#ae81ff></span>    --port <span style=color:#ae81ff>3306</span> <span style=color:#ae81ff>\
</span></span></span><span style=display:flex><span><span style=color:#ae81ff></span>    --cidr 0.0.0.0/0
</span></span></code></pre></div><p>⚠️ <strong>Lưu ý bảo mật:</strong> Chỉ mở 0.0.0.0/0 cho môi trường test. Trong production, hãy giới hạn IP cụ thể.</p><h2 id=5-test-kết-nối>5. Test kết nối</h2><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span><span style=color:#75715e># Cài đặt MySQL client</span>
</span></span><span style=display:flex><span>sudo apt-get install mysql-client
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e># Kết nối đến RDS</span>
</span></span><span style=display:flex><span>mysql -h mydb-performance-test.xxxxxxxxx.us-east-1.rds.amazonaws.com <span style=color:#ae81ff>\
</span></span></span><span style=display:flex><span><span style=color:#ae81ff></span>      -u admin -p testdb
</span></span></code></pre></div><h2 id=troubleshooting>Troubleshooting</h2><h3 id=lỗi-thường-gặp>Lỗi thường gặp:</h3><ol><li><p><strong>Performance Insights không hiển thị data:</strong></p><ul><li>Đợi 5-10 phút sau khi enable</li><li>Kiểm tra có traffic đến database không</li></ul></li><li><p><strong>Không kết nối được database:</strong></p><ul><li>Kiểm tra Security Group rules</li><li>Kiểm tra Public accessibility = Yes</li><li>Kiểm tra VPC và Subnet configuration</li></ul></li><li><p><strong>Enhanced Monitoring không hoạt động:</strong></p><ul><li>Kiểm tra IAM role permissions</li><li>Tạo lại monitoring role nếu cần</li></ul></li></ol><h2 id=chi-phí-ước-tính>Chi phí ước tính</h2><ul><li><strong>RDS db.t3.micro:</strong> ~$12.41/tháng (Free tier: 750 giờ/tháng)</li><li><strong>Performance Insights:</strong> Free cho 7 days retention</li><li><strong>Enhanced Monitoring:</strong> ~$2.50/tháng cho 60-second granularity</li><li><strong>Storage 20GB:</strong> ~$2.30/tháng</li></ul><p><strong>Tổng:</strong> ~$17/tháng (hoặc free nếu trong Free tier)</p></div></div></section><script>document.getElementById("sidebar-toggle").addEventListener("click",function(e){e.preventDefault(),document.getElementById("sidebar").classList.toggle("open")})</script></body></html>